@using X.PagedList.Mvc.Bootstrap4.Core
@model System.Collections.Generic.List<CRM_Upack_kz.Models.Application>

@{
    ViewBag.Title = "Список проблем";
    Layout = "_Layout";
}

@{
  if (Model.Count != 0)
  {
    <div class="text-center col-sm-3 col-md-3 col-lg-12">
      <table class="table table-hover">
        <thead class="table-secondary">
        <tr>
          <th scope="col" class="font">№</th>
          <th scope="col" class="font">Менеджер</th>
          <th scope="col" class="font">Дата создания</th>
          <th scope="col" class="font">Ожидается</th>
          <th scope="col" class="font">Код клиента</th>
          <th scope="col" class="font">Клиент</th>
          <th scope="col" class="font">Артикул</th>
          <th scope="col" class="font">Кол-во</th>
          <th scope="col" class="font">Цена</th>
          <th scope="col" class="font">Сумма</th>
          <th scope="col" class="font">Комментарий</th>
          <th scope="col" class="font">Действия</th>
        </tr>
        </thead>
        <tbody>
        @{foreach (var appl in Model)
          {
            <tr>
              <th scope="row">@{int num = Model.IndexOf(appl) + 1;} @num</th>
              <td class="font text-dark">@appl.Manager.Surname @appl.Manager.Name</td>
              <td class="font text-dark">@appl.CreateDate.ToShortDateString()</td>
              <td class="font text-danger">
                @if (appl.WaitingDate != new DateTime(0001, 01, 01))
                {
                  @appl.WaitingDate.ToShortDateString()
                }
                else
                {
                  @:Дата не указана
                }
              </td>
              <td class="font text-dark">@appl.Client.CodeClient</td>
              <td class="font text-dark">@appl.Client.Title</td>
              <td class="font text-dark">@appl.ArticleNumber</td>
              <td class="font text-dark">@appl.Quantity</td>
              <td class="font text-dark">@appl.Price</td>
              <td class="font text-dark">@appl.Amount</td>
              <td class="font text-dark">@appl.Comment</td>
              <td>
                <div class="btn-group btn-group-sm shadow" role="group" aria-label="Button group with nested dropdown">
                  <button type="button" class="btn btn-success" title="Ответить">Ответить</button>
                  <button type="button" class="btn btn-warning" title="Редактировать"><i class="bi bi-pencil-square"></i></button>
                  <button type="button" class="btn btn-danger" title="Удалить"><i class="bi bi-trash"></i></button>
                </div>
              </td>
            </tr>
          }
        }
        </tbody>
      </table>
    </div>
    
    
  }
  else
  {
    <h3>Обращений не поступило, добавьте новые обращения</h3>
  }
}

@section Scripts
{
  <script >
    $(document).ready(function () {
        $('#caption').text("Список обращений");
    });
 </script>
}

